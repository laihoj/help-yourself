<% include ./partials/header %>

<div class="section match">
	<div class="container">
		<div class="row">
			<div class="u-full-width">
			<% include ./partials/newcategoryform %>
			</div>

			<h1>Categories</h1>
			<form action="/relevances/?_method=PUT" method="post" id="relevance_form">
				<div class="data">
					<table id="categoriesTable" class="categories u-full-width">
						<thead>
							<tr>
								<th onclick="sortTable('categoriesTable',0,'true');">#<i class="fas fa-filter"></i></th>
								<th onclick="sortTable('categoriesTable',1,'true');">Label</th>
								<th onclick="sortTable('categoriesTable',2,'true');">Relevance</th>
							</tr>
						</thead>
						<tbody>
					 		<% for(var i = 0; i < categories.length; i++) { %>
					  			<tr>
					  				<td><%= i %></td>
				  					<td onclick="window.location='/categories/<%= categories[i].label %>'">
				  					<%= categories[i].label %></td>
				  					<td><input 
				  						type="range" 
				  						min="1" 
				  						max="100" 
				  						value="50" 
				  						class="slider" 
				  						id="<%= categories[i].label %>_relevance" 
										name="<%= categories[i].label %>_relevance" 

										onmouseup="updateRelevance('<%= categories[i].label %>'); document.getElementById('relevance_form').submit();"
										ontouchend="updateRelevance('<%= categories[i].label %>');document.getElementById('relevance_form').submit();">
			  						</td>
								</tr>
							<% } %>
						</tbody>
					</table>
				</div>
			</form>
		</div>
	</div>
</div>

<% include ./partials/footer %>